<div class="flex h-screen overflow-hidden">
    @if(sidebarTemplate) {
    <!-- mobile sidebar -->
    <!-- Off-canvas menu for mobile, show/hide based on off-canvas menu state. -->
    <div
        class="fixed inset-0 z-40 flex md:hidden"
        [class.hidden]="!isOverlayVisible$$()"
        role="dialog"
        aria-modal="true"
    >
        <!--
          Off-canvas menu overlay, show/hide based on off-canvas menu state.

          Entering: "transition-opacity ease-linear duration-300"
            From: "opacity-0"
            To: "opacity-100"
          Leaving: "transition-opacity ease-linear duration-300"
            From: "opacity-100"
            To: "opacity-0"
        -->
        @if (isOverlayVisible$$()) {
        <div
            class="fixed inset-0 bg-gray-600 bg-opacity-75 opacity-0"
            aria-hidden="true"
            [rrTransition]="isSidebarOpened$$()"
            rrTransitionEntering="transition-opacity ease-linear duration-300"
            rrTransitionEnteringFrom="opacity-0"
            rrTransitionEnteringTo="opacity-100"
            rrTransitionLeaving="transition-opacity ease-linear duration-300"
            rrTransitionLeavingFrom="opacity-100"
            rrTransitionLeavingTo="opacity-0"
            (onTransitionLeavingEnd)="hideOverlay()"
        ></div>
        }
        <!--
          Off-canvas menu, show/hide based on off-canvas menu state.

          Entering: "transition ease-in-out duration-300 transform"
            From: "-translate-x-full"
            To: "translate-x-0"
          Leaving: "transition ease-in-out duration-300 transform"
            From: "translate-x-0"
            To: "-translate-x-full"
        -->
        <div
            class="relative flex w-full max-w-xs flex-1 -translate-x-full flex-col"
            [rrTransition]="isSidebarOpened$$()"
            rrTransitionEntering="transition ease-in-out duration-300 transform"
            rrTransitionEnteringFrom="-translate-x-full"
            rrTransitionEnteringTo="translate-x-0"
            rrTransitionLeaving="transition ease-in-out duration-300 transform"
            rrTransitionLeavingFrom="translate-x-0"
            rrTransitionLeavingTo="-translate-x-full"
        >
            <!--
              Close button, show/hide based on off-canvas menu state.

              Entering: "ease-in-out duration-300"
                From: "opacity-0"
                To: "opacity-100"
              Leaving: "ease-in-out duration-300"
                From: "opacity-100"
                To: "opacity-0"
            -->

            <div
                class="absolute right-0 top-0 -mr-12 pt-2 opacity-0"
                [rrTransition]="isSidebarOpened$$()"
                rrTransitionEntering="ease-in-out duration-300"
                rrTransitionEnteringFrom="opacity-0"
                rrTransitionEnteringTo="opacity-100"
                rrTransitionLeaving="ease-in-out duration-300"
                rrTransitionLeavingFrom="opacity-100"
                rrTransitionLeavingTo="opacity-0"
            >
                <button
                    class="ml-1 flex h-10 w-10 items-center justify-center rounded-full text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
                    (click)="toggleSidebar()"
                >
                    <span class="sr-only">Close sidebar</span>
                    <!--<ns-icon [name]="'hiXOutline'" [size]="'xl'"></ns-icon>-->
                </button>
            </div>

            <div class="h-0 flex-1 overflow-y-auto pb-4 pt-5">
                <ng-container *ngTemplateOutlet="sidebarTemplate">
                </ng-container>
            </div>
        </div>

        <div class="w-14 shrink-0" aria-hidden="true">
            <!-- Force sidebar to shrink to fit close icon -->
        </div>
    </div>

    <!-- Static sidebar for desktop -->
    <div
        class="hidden transition-all duration-300 md:flex md:shrink-0"
        [ngClass]="{
            'translate-x-[-100%]': !isSidebarOpened$$()
        }"
    >
        <div class="flex w-64 flex-col">
            <ng-container *ngTemplateOutlet="sidebarTemplate"> </ng-container>
        </div>
    </div>
    }
    <!-- main container -> on the right of the sidebar -->
    <div
        class="flex w-0 flex-1 flex-col overflow-hidden transition-all duration-300"
        [ngClass]="{
            '-ml-64': !isSidebarOpened$$()
        }"
    >
        <div class="relative z-10 flex min-h-[4rem] shrink-0 shadow">
            <!-- toggle button for mobile sidebar -->
            <button
                class="h-full border-r border-gray-200 px-4 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:hidden"
                (click)="toggleSidebar()"
            >
                <span class="sr-only">Open sidebar</span>
                <!--<ns-icon [name]="'heroiconMenuOutline'" [size]="'xl'"></ns-icon>-->
            </button>

            <!-- toggle button for desktop sidebar -->
            <button
                class="hidden h-full border-r border-gray-200 px-4 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:block"
                (click)="toggleSidebar()"
            >
                <span class="sr-only">Open sidebar</span>
                <!--<app-icon
                    [name]="
                        isSidebarOpened$$()
                            ? 'hiChevronLeftOutline'
                            : 'heroiconMenuOutline'
                    "
                    [size]="isSidebarOpened$$() ? 'default' : 'xl'"
                ></app-icon>-->
            </button>

            @if(topbarTemplate) {
            <!-- topbar content -->
            <div class="flex-1">
                <ng-container *ngTemplateOutlet="topbarTemplate">
                </ng-container>
            </div>
            }
        </div>

        <!-- main content -->
        <main class="relative z-0 flex-1 overflow-y-auto focus:outline-none">
            <div class="mx-auto px-4 py-8 sm:px-6 md:px-8">
                <rr-button (click)="toggleSidebar()">Toggle sidebar</rr-button>
                <ng-content></ng-content>
            </div>
            <div class="sticky bottom-0">
                <ng-container *ngTemplateOutlet="footerTemplate"></ng-container>
            </div>
        </main>
    </div>
</div>
